%html
  %head
    %title= task_list_title
    %link{:rel => "stylesheet", :href => "/css/font-awesome.min.css"}
    %link{:rel => "stylesheet", :href => "/css/bulma_custom.css"}
    %link{:rel => "stylesheet", :href => "/css/styles.css"}
  %body
    %section.section
      .columns
        .column.is-half.is-offset-one-quarter
          .heading.has-text-centered
            %h1.title= task_list_title
      .columns
        .column.is-half.is-offset-one-quarter
          - task_list.each do |task|
            .card{:class => "#{task.completed? ? 'true' : 'false'}" }
              %header.card-header
                .card-header-title
                  %span.icon
                    %form{:method => "post", :action => "/toggle_complete/#{task.id}"}
                      - case task.completed?
                      - when true
                        %button{:type => "submit", :value => "Undo", :title => "Mark as not complete", :class => "button is-small is-outlined"}
                          %span.icon.is-small
                            %i.fa.fa-check-circle-o
                      - when false
                        %button{:type => "submit", :value => "Done", :title => "Mark as complete", :class => "button is-small"}
                          %span.icon.is-small
                            %i.fa.fa-circle-o
                  %p #{task.title}
                .card-header-icon
                  %span.icon
                    %form{:method => "post", :action => "/delete/#{task.id}", :class => "card-footer-item"}
                      %button{:type => "submit", :value => "Delete", :title => "Delete Task", :class => "button is-small is-danger is-outlined"}
                        %span.icon.is-small
                          %i.fa.fa-times
      .columns
        .column.is-half.is-offset-one-quarter
          %form{:method => "post", :action => "/new-todo", :class => "field has-addons has-addons-centered"}
            %p.control
              %input{:type => "text", :name =>"todo", :placeholder => "Task title", :class => "input"}
            %p.control
              %input{:type => "submit", :value => "Add Task", :class => "button is-primary"}
